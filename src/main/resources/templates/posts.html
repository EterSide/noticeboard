<!DOCTYPE html>
<html xmlns:th="http://www.w3.org/1999/xhtml" data-theme="light">
<meta charset="UTF-8">
<head>
    <link href="https://cdn.jsdelivr.net/npm/daisyui@4.12.14/dist/full.min.css" rel="stylesheet" type="text/css" />
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <title>BookMarket - Í≤åÏãúÌåê</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap');
        body {
            font-family: 'Noto Sans KR', sans-serif;
        }
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .board-section {
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.95);
        }
    </style>
</head>
<body class="gradient-bg min-h-screen">
    <!-- Navigation from fragments -->
    <div th:replace="fragments/header :: header"></div>

    <!-- Main Content -->
    <div class="container mx-auto px-4 py-8">
        <!-- Hero Section -->
        <div class="text-center mb-8">
            <h1 class="text-5xl font-bold text-white mb-4">
                <i class="fas fa-clipboard-list mr-3"></i>
                Í≤åÏãúÌåê
            </h1>
            <p class="text-xl text-white/80">Îã§ÏñëÌïú Ïù¥ÏïºÍ∏∞Î•º ÎÇòÎàÑÏñ¥Î≥¥ÏÑ∏Ïöî!</p>
        </div>

        <!-- Board Stats -->
        <div class="max-w-6xl mx-auto mb-8">
            <div class="stats shadow-2xl bg-base-100/95 backdrop-blur-sm w-full">
                <div class="stat">
                    <div class="stat-figure text-primary">
                        <i class="fas fa-file-alt text-3xl"></i>
                    </div>
                    <div class="stat-title">Ï†ÑÏ≤¥ Í≤åÏãúÍ∏Ä</div>
                    <div class="stat-value text-primary" th:text="${#lists.size(posts)} + 'Í∞ú'">0Í∞ú</div>
                    <div class="stat-desc">ÌôúÎ∞úÌïú ÏÜåÌÜµÏù¥ Ïù¥Î£®Ïñ¥ÏßÄÍ≥† ÏûàÏñ¥Ïöî</div>
                </div>
                
                <div class="stat">
                    <div class="stat-figure text-secondary">
                        <i class="fas fa-eye text-3xl"></i>
                    </div>
                    <div class="stat-title">Ï¥ù Ï°∞ÌöåÏàò</div>
                    <div class="stat-value text-secondary">
                        <span th:text="${#lists.isEmpty(posts) ? '0' : 'Îã§Ïàò'}">0</span>
                    </div>
                    <div class="stat-desc">ÎßéÏùÄ Í¥ÄÏã¨ÏùÑ Î∞õÍ≥† ÏûàÏñ¥Ïöî</div>
                </div>
                
                <div class="stat">
                    <div class="stat-figure text-accent">
                        <i class="fas fa-heart text-3xl"></i>
                    </div>
                    <div class="stat-title">Ï¥ù Ï∂îÏ≤úÏàò</div>
                    <div class="stat-value text-accent">
                        <span th:text="${#lists.isEmpty(posts) ? '0' : 'Îã§Ïàò'}">0</span>
                    </div>
                    <div class="stat-desc">Ï¢ãÏùÄ Í∏ÄÎì§Ïù¥ ÎßéÏïÑÏöî</div>
                </div>
                
                <div class="stat">
                    <div class="stat-figure text-info">
                        <i class="fas fa-book text-3xl"></i>
                    </div>
                    <div class="stat-title">Ï±Ö Î¶¨Î∑∞</div>
                    <div class="stat-value text-info">
                        <span th:text="${#lists.isEmpty(posts) ? '0Í∞ú' : (#lists.size(posts.?[category.name() == 'REVIEW']) + 'Í∞ú')}">0Í∞ú</span>
                    </div>
                    <div class="stat-desc">ÏÉùÏÉùÌïú ÎèÖÏÑú ÌõÑÍ∏∞Îì§</div>
                </div>
            </div>
        </div>

        <!-- Board Actions -->
        <div class="max-w-6xl mx-auto mb-6">
            <div class="flex flex-col sm:flex-row justify-between items-center gap-4">
                <div class="breadcrumbs text-sm text-white/80">
                    <ul>
                        <li><a href="/" class="hover:text-white"><i class="fas fa-home mr-1"></i>Ìôà</a></li>
                        <li><i class="fas fa-clipboard-list mr-1"></i>Í≤åÏãúÌåê</li>
                    </ul>
                </div>
                <div class="flex gap-2">
                    <button class="btn btn-ghost text-white hover:bg-white/20">
                        <i class="fas fa-search mr-2"></i>Í≤ÄÏÉâ
                    </button>
                    <a href="/post/add" class="btn btn-primary bg-gradient-to-r from-purple-600 to-blue-600 border-none text-white hover:shadow-lg transform hover:scale-105 transition-all duration-200">
                        <i class="fas fa-plus mr-2"></i>Í∏ÄÏì∞Í∏∞
                    </a>
                </div>
            </div>
        </div>

        <!-- Posts Board -->
        <div class="max-w-6xl mx-auto">
            <div class="card bg-base-100 shadow-2xl board-section">
                <div class="card-body p-0">
                    <!-- Board Header -->
                    <div class="bg-gradient-to-r from-purple-600 to-blue-600 text-white p-6 rounded-t-2xl">
                        <h2 class="text-2xl font-bold flex items-center">
                            <i class="fas fa-list mr-3"></i>
                            Í≤åÏãúÍ∏Ä Î™©Î°ù
                        </h2>
                    </div>
                    
                    <!-- Posts List -->
                    <div class="overflow-x-auto">
                        <table class="table table-zebra w-full">
                            <thead class="bg-base-200">
                                <tr>
                                    <th class="text-center w-16">Î≤àÌò∏</th>
                                    <th class="text-center w-20">Ïπ¥ÌÖåÍ≥†Î¶¨</th>
                                    <th class="text-left">Ï†úÎ™©</th>
                                    <th class="text-center w-32">ÏûëÏÑ±Ïûê</th>
                                    <th class="text-center w-16">Ï°∞Ìöå</th>
                                    <th class="text-center w-16">Ï∂îÏ≤ú</th>
                                    <th class="text-center w-32">ÏûëÏÑ±Ïùº</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Í≤åÏãúÍ∏ÄÏù¥ ÏóÜÎäî Í≤ΩÏö∞ -->
                                <tr th:if="${#lists.isEmpty(posts)}">
                                    <td colspan="7" class="text-center py-12">
                                        <div class="flex flex-col items-center">
                                            <i class="fas fa-inbox text-4xl text-base-content/30 mb-4"></i>
                                            <p class="text-lg text-base-content/60 mb-2">ÏïÑÏßÅ Í≤åÏãúÍ∏ÄÏù¥ ÏóÜÏäµÎãàÎã§</p>
                                            <p class="text-sm text-base-content/40 mb-4">Ï≤´ Î≤àÏß∏ Í≤åÏãúÍ∏ÄÏùÑ ÏûëÏÑ±Ìï¥Î≥¥ÏÑ∏Ïöî!</p>
                                            <a href="/post/add" class="btn btn-primary btn-sm">
                                                <i class="fas fa-plus mr-2"></i>Í∏ÄÏì∞Í∏∞
                                            </a>
                                        </div>
                                    </td>
                                </tr>
                                
                                <!-- Í≤åÏãúÍ∏Ä Î™©Î°ù -->
                                <tr th:each="post, postStat : ${posts}" class="hover:bg-base-200/50 transition-colors duration-200">
                                    <td class="text-center font-medium">
                                        <!-- Í≥µÏßÄÏÇ¨Ìï≠Ïù¥Î©¥ NOTICE, ÏÉÅÎã®Í≥†Ï†ïÏù¥Î©¥ Î≤àÌò∏ ÎåÄÏã† üìå ÌëúÏãú -->
                                        <span th:if="${post.isNotice}" class="badge badge-error badge-sm text-white">Í≥µÏßÄ</span>
                                        <span th:unless="${post.isNotice}">
                                            <span th:if="${post.isPinned}" class="text-warning">üìå</span>
                                            <span th:unless="${post.isPinned}" th:text="${postStat.count}">1</span>
                                        </span>
                                    </td>
                                    <td class="text-center">
                                        <div class="badge badge-outline badge-sm" 
                                             th:classappend="${post.category.name() == 'REVIEW'} ? 'badge-primary' : (${post.category.name() == 'CHAT'} ? 'badge-secondary' : 'badge-accent')"
                                             th:text="${post.category.displayName}">Ïπ¥ÌÖåÍ≥†Î¶¨</div>
                                    </td>
                                    <td class="text-left">
                                        <div class="flex items-center">
                                            <!-- Ïπ¥ÌÖåÍ≥†Î¶¨Î≥Ñ ÏïÑÏù¥ÏΩò -->
                                            <i th:class="${post.category.name() == 'REVIEW'} ? 'fas fa-star text-yellow-500' : 
                                                        (${post.category.name() == 'DISCUSSION'} ? 'fas fa-comments text-blue-500' : 
                                                        (${post.category.name() == 'RECOMMENDATION'} ? 'fas fa-thumbs-up text-green-500' : 
                                                        (${post.category.name() == 'QUESTION'} ? 'fas fa-question-circle text-purple-500' : 
                                                        'fas fa-file-alt text-gray-500')))" 
                                               class="mr-2 text-sm"></i>
                                            
                                            <div class="flex-1">
                                                <a th:href="@{'/post/' + ${post.id}}" 
                                                   class="link link-hover text-base font-medium flex items-center">
                                                    <span th:text="${post.title}" class="truncate max-w-md">Í≤åÏãúÍ∏Ä Ï†úÎ™©</span>
                                                    
                                                    <!-- Ïä§Ìè¨ÏùºÎü¨ Ï£ºÏùò ÌëúÏãú -->
                                                    <span th:if="${post.spoilerAlert}" 
                                                          class="badge badge-warning badge-xs ml-2" title="Ïä§Ìè¨ÏùºÎü¨ Ï£ºÏùò">‚ö†Ô∏è</span>
                                                    
                                                    <!-- Ï±Ö Ï†úÎ™©Ïù¥ ÏûàÏúºÎ©¥ ÌëúÏãú -->
                                                    <span th:if="${post.bookTitle}" 
                                                          class="badge badge-info badge-xs ml-2" 
                                                          th:title="'ÎèÑÏÑú: ' + ${post.bookTitle}">üìö</span>
                                                    
                                                    <!-- Î≥ÑÏ†êÏù¥ ÏûàÏúºÎ©¥ ÌëúÏãú (Î¶¨Î∑∞Ïùò Í≤ΩÏö∞) -->
                                                    <span th:if="${post.rating != null}" 
                                                          class="ml-2 text-yellow-500 text-sm">
                                                        <span th:each="star : ${#numbers.sequence(1, post.rating)}">‚≠ê</span>
                                                    </span>
                                                </a>
                                                
                                                <!-- Í≤åÏãúÍ∏Ä Ï†ïÎ≥¥ -->
                                                <div class="text-xs text-base-content/60 mt-1">
                                                    <!-- Ï±Ö Ï†úÎ™©Í≥º Ï†ÄÏûê ÌëúÏãú -->
                                                    <span th:if="${post.bookTitle}" class="font-medium">
                                                        üìñ <span th:text="${post.bookTitle}">Ï±Ö Ï†úÎ™©</span>
                                                        <span th:if="${post.author}" th:text="' - ' + ${post.author}"> - Ï†ÄÏûê</span>
                                                        <span th:if="${post.genre}" class="badge badge-ghost badge-xs ml-2" 
                                                              th:text="${post.genre.displayName}">Ïû•Î•¥</span>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="text-center">
                                        <div class="flex items-center justify-center">
                                            <div class="avatar">
                                                <div class="w-8 rounded-full bg-gradient-to-r from-purple-600 to-blue-600 flex items-center justify-center">
                                                    <i class="fas fa-user text-white text-xs"></i>
                                                </div>
                                            </div>
                                            <span class="ml-2 font-medium" th:text="${post.user?.nickname} ?: 'ÏùµÎ™Ö'">ÏûëÏÑ±Ïûê</span>
                                        </div>
                                    </td>
                                    <td class="text-center">
                                        <div class="text-sm" th:text="${post.viewCount}">0</div>
                                    </td>
                                    <td class="text-center">
                                        <div class="flex items-center justify-center">
                                            <i class="fas fa-heart text-red-500 mr-1"></i>
                                            <span class="text-sm" th:text="${post.likeCount}">0</span>
                                        </div>
                                    </td>
                                    <td class="text-center text-sm text-base-content/70">
                                        <div class="flex flex-col" th:if="${post.createdAt != null}">
                                            <span th:text="${#temporals.format(post.createdAt, 'MM-dd')}">12-25</span>
                                            <span class="text-xs" th:text="${#temporals.format(post.createdAt, 'HH:mm')}">12:34</span>
                                        </div>
                                        <div class="flex flex-col" th:unless="${post.createdAt != null}">
                                            <span>Î∞©Í∏à Ï†Ñ</span>
                                            <span class="text-xs">--:--</span>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- Pagination (Ï∂îÌõÑ Íµ¨ÌòÑ) -->
                    <div class="flex justify-center p-6">
                        <div class="join">
                            <button class="join-item btn btn-sm">¬´</button>
                            <button class="join-item btn btn-sm btn-active">1</button>
                            <button class="join-item btn btn-sm">2</button>
                            <button class="join-item btn btn-sm">3</button>
                            <button class="join-item btn btn-sm">¬ª</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Additional Features Section -->
        <div class="max-w-6xl mx-auto mt-8">
            <div class="grid md:grid-cols-3 gap-6">
                <!-- Ïù∏Í∏∞ Í≤åÏãúÍ∏Ä -->
                <div class="card bg-base-100/90 backdrop-blur-sm shadow-xl">
                    <div class="card-body">
                        <h3 class="text-lg font-bold flex items-center">
                            <i class="fas fa-fire mr-2 text-orange-500"></i>
                            Ïù∏Í∏∞ Í≤åÏãúÍ∏Ä
                        </h3>
                        <div class="space-y-3">
                            <div th:each="post, postStat : ${posts}" th:if="${postStat.count <= 3}" 
                                 class="flex items-start justify-between text-sm border-b border-base-300 pb-2">
                                <div class="flex-1">
                                    <div class="flex items-center mb-1">
                                        <span class="badge badge-primary badge-xs mr-2" th:text="${postStat.count}">1</span>
                                        <span class="badge badge-outline badge-xs mr-2" th:text="${post.category.displayName}">Ïπ¥ÌÖåÍ≥†Î¶¨</span>
                                    </div>
                                    <a th:href="@{'/post/' + ${post.id}}" 
                                       class="link link-hover font-medium truncate block" th:text="${post.title}">Í≤åÏãúÍ∏Ä Ï†úÎ™©</a>
                                    <div class="text-xs text-base-content/60 mt-1">
                                        <span th:text="${post.user?.nickname} ?: 'ÏùµÎ™Ö'">ÏûëÏÑ±Ïûê</span>
                                    </div>
                                </div>
                                <div class="flex flex-col items-end text-xs text-base-content/60 ml-2">
                                    <div class="flex items-center">
                                        <i class="fas fa-heart text-red-500 mr-1"></i>
                                        <span th:text="${post.likeCount}">0</span>
                                    </div>
                                    <div class="flex items-center mt-1">
                                        <i class="fas fa-eye text-gray-500 mr-1"></i>
                                        <span th:text="${post.viewCount}">0</span>
                                    </div>
                                </div>
                            </div>
                            <div th:if="${#lists.isEmpty(posts)}" class="text-center text-base-content/60 py-4">
                                ÏïÑÏßÅ Í≤åÏãúÍ∏ÄÏù¥ ÏóÜÏäµÎãàÎã§
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Ïπ¥ÌÖåÍ≥†Î¶¨Î≥Ñ ÌÜµÍ≥Ñ -->
                <div class="card bg-base-100/90 backdrop-blur-sm shadow-xl">
                    <div class="card-body">
                        <h3 class="text-lg font-bold flex items-center">
                            <i class="fas fa-chart-pie mr-2 text-blue-500"></i>
                            Ïπ¥ÌÖåÍ≥†Î¶¨Î≥Ñ Í∏Ä
                        </h3>
                        <div class="space-y-2 text-sm">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <i class="fas fa-star text-yellow-500 mr-2"></i>
                                    <span>ÎèÑÏÑú Î¶¨Î∑∞</span>
                                </div>
                                <span class="badge badge-primary badge-sm" 
                                      th:text="${#lists.isEmpty(posts) ? '0' : #lists.size(posts.?[category.name() == 'REVIEW'])}">0</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <i class="fas fa-comments text-blue-500 mr-2"></i>
                                    <span>ÎèÖÏÑú ÌÜ†Î°†</span>
                                </div>
                                <span class="badge badge-info badge-sm" 
                                      th:text="${#lists.isEmpty(posts) ? '0' : #lists.size(posts.?[category.name() == 'DISCUSSION'])}">0</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <i class="fas fa-thumbs-up text-green-500 mr-2"></i>
                                    <span>Ï±Ö Ï∂îÏ≤ú</span>
                                </div>
                                <span class="badge badge-success badge-sm" 
                                      th:text="${#lists.isEmpty(posts) ? '0' : #lists.size(posts.?[category.name() == 'RECOMMENDATION'])}">0</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <i class="fas fa-question-circle text-purple-500 mr-2"></i>
                                    <span>ÎèÖÏÑú ÏßàÎ¨∏</span>
                                </div>
                                <span class="badge badge-secondary badge-sm" 
                                      th:text="${#lists.isEmpty(posts) ? '0' : #lists.size(posts.?[category.name() == 'QUESTION'])}">0</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <i class="fas fa-file-alt text-gray-500 mr-2"></i>
                                    <span>ÏûêÏú† Ïû°Îã¥</span>
                                </div>
                                <span class="badge badge-ghost badge-sm" 
                                      th:text="${#lists.isEmpty(posts) ? '0' : #lists.size(posts.?[category.name() == 'CHAT'])}">0</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ÏµúÍ∑º ÌôúÎèô -->
                <div class="card bg-base-100/90 backdrop-blur-sm shadow-xl">
                    <div class="card-body">
                        <h3 class="text-lg font-bold flex items-center">
                            <i class="fas fa-clock mr-2 text-blue-500"></i>
                            ÏµúÍ∑º ÌôúÎèô
                        </h3>
                        <div class="space-y-2 text-sm">
                            <div class="flex items-center">
                                <i class="fas fa-plus text-green-500 mr-2"></i>
                                <span>ÏÉà Í≤åÏãúÍ∏Ä ÏûëÏÑ±</span>
                            </div>
                            <div class="flex items-center">
                                <i class="fas fa-comment text-purple-500 mr-2"></i>
                                <span>ÎåìÍ∏Ä ÏûëÏÑ±</span>
                            </div>
                            <div class="flex items-center">
                                <i class="fas fa-heart text-red-500 mr-2"></i>
                                <span>Ï¢ãÏïÑÏöî ÌëúÏãú</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Í≤åÏãúÌåê Í∑úÏπô -->
                <div class="card bg-base-100/90 backdrop-blur-sm shadow-xl">
                    <div class="card-body">
                        <h3 class="text-lg font-bold flex items-center">
                            <i class="fas fa-info-circle mr-2 text-indigo-500"></i>
                            Í≤åÏãúÌåê Í∑úÏπô
                        </h3>
                        <div class="space-y-2 text-sm">
                            <div class="flex items-start">
                                <i class="fas fa-check text-green-500 mr-2 mt-0.5"></i>
                                <span>ÏÑúÎ°ú Ï°¥Ï§ëÌïòÎäî ÎåìÍ∏Ä Î¨∏Ìôî</span>
                            </div>
                            <div class="flex items-start">
                                <i class="fas fa-check text-green-500 mr-2 mt-0.5"></i>
                                <span>Í±¥Ï†ÑÌïú ÎÇ¥Ïö©Ïùò Í≤åÏãúÍ∏Ä ÏûëÏÑ±</span>
                            </div>
                            <div class="flex items-start">
                                <i class="fas fa-check text-green-500 mr-2 mt-0.5"></i>
                                <span>Ïä§Ìå∏ÏÑ± Í∏Ä Í∏àÏßÄ</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer from fragments -->
    <div th:replace="fragments/footer :: footer"></div>

    <script>
        // Í≤åÏãúÍ∏Ä Í≤ÄÏÉâ Í∏∞Îä• (Ï∂îÌõÑ Íµ¨ÌòÑ)
        function searchPosts() {
            // Í≤ÄÏÉâ Í∏∞Îä• Íµ¨ÌòÑ
        }
        
        // ÌéòÏù¥ÏßÄÎÑ§Ïù¥ÏÖò (Ï∂îÌõÑ Íµ¨ÌòÑ)
        function goToPage(page) {
            // ÌéòÏù¥ÏßÄÎÑ§Ïù¥ÏÖò Íµ¨ÌòÑ
        }
        
        // Ïã§ÏãúÍ∞Ñ ÏóÖÎç∞Ïù¥Ìä∏ (WebSocket Îì±ÏúºÎ°ú Ï∂îÌõÑ Íµ¨ÌòÑ)
        function refreshBoard() {
            location.reload();
        }
        
        // Ï£ºÍ∏∞Ï†ÅÏúºÎ°ú Í≤åÏãúÌåê ÏÉàÎ°úÍ≥†Ïπ® (ÏòµÏÖò)
        // setInterval(refreshBoard, 30000); // 30Ï¥àÎßàÎã§
    </script>
</body>
</html>